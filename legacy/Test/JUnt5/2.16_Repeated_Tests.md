# Repeated Tests 

[ğŸ·ï¸ 2.16_Repeated_Tests](https://junit.org/junit5/docs/current/user-guide/#writing-tests-repeated-tests)


## Get Test

ìë™ìœ¼ë¡œ 10ë²ˆ ë°˜ë³µë˜ëŠ” repeatedTest() ì„ ì–¸í•˜ëŠ” ë°©ë²• 

```java
public class RepeatedTestDemo {

    @RepeatedTest(10)
    void repeatedTest() {
        // ...
    }
}
```

### @RepeatedTest with @BeforeEach
valueì— ë”°ë¼ì„œ në²ˆ ë°˜ë³µí•˜ëŠ” í…ŒìŠ¤íŠ¸ ì¤‘ `beforeEach`ë¥¼ ì´ìš©í•˜ê¸°

```java
@BeforeEach
    void beforeEach(
            TestInfo testInfo,
            RepetitionInfo repetitionInfo
    ) {
        var currentRepetition = repetitionInfo.getCurrentRepetition();
        var totalRepetitions = repetitionInfo.getTotalRepetitions();
        var methodName = testInfo
                .getTestMethod()
                .map(Method::getName)
                .orElse("");
        System.out.printf(
                String.format(
                        "About to execute repetition %d of %d for %s\n"
                        , currentRepetition, totalRepetitions, methodName
                )
        );
    }
```
í…ŒìŠ¤íŠ¸ ì´ íšŸìˆ˜ì™€, í˜„ì¬ ë°˜ë³µì¤‘ì¸ íšŸìˆ˜ë¥¼ ì•Œê¸° ìœ„í•´ì„œ ë©”ì†Œë“œ ë§¤ê°œë³€ìˆ˜ë¡œ `RepetitionInfo`ì™€ `TestInfo`ë¥¼ ë°›ì•„ ê°’ì„ ê°€ì§€ê³  ì™”ë‹¤.

ê° í…ŒìŠ¤íŠ¸ëŠ” ì‹¤í–‰ë˜ê¸° ì „ ë§¤ë²ˆ `beforeEach()` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©° ì½˜ì†”ì— í…ŒìŠ¤íŠ¸ ì •ë³´ë¥¼ ì¶œë ¥í•œë‹¤.

### failureThreshole ì†ì„±
ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •ëœ ê°’ì€ `Integer.MAX_VALUE`ë¡œ ë°˜ë³µ í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ ì¤‘ì— ì‹¤íŒ¨í•˜ë”ë¼ë„, ë‹¤ìŒ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•œë‹¤.

ì†ì„± ê°’ì„ ìˆ˜ì •í•˜ë©´ ì‹¤íŒ¨ ì„ê³„ê°’ì„ ì§€ì •í•˜ì—¬, ì§€ì •ëœ íšŸìˆ˜ë§Œí¼ ë°˜ë³µì´ ì‹¤í–‰ëœ í›„ ì„ê³„ê°’ì— ë„ë‹¬í•˜ë©´ í…ŒìŠ¤íŠ¸ë¥¼ ì¢…ë£Œí•œë‹¤.

```java
@RepeateedTest(
  value = 8,
  failureThreshold = 2
)
void repeatedTestWithFailureThreshold(
  RepetitionInfo repetitionInfo
) {
  if (repetitionInfo.getCurrentRepetition() % 2 == 0) {
    fail("Bool!");
  }
}
```

### DisplayName, repetedName
í…ŒìŠ¤íŠ¸ ëª…ê³¼ ë°˜ë³µ íšŸìˆ˜ì™€ ì´ íšŸìˆ˜ë¥¼ ì‹ë³„í•  ìˆ˜ ìˆë„ë¡ ì†ì„± ì •ì˜

```java
@RepeatedTest(
  value = 1,
  name = "{displayName} {currentRepetition}/{totoalRepetitions}"
)
@DisplayName("Repeat!")
void customDisplayName(
  TestInfo testInfo
) {
  assertEquals("Repeat! 1/1", testInfo.getDisplayName());
}
```

ë˜ëŠ” ë¯¸ë¦¬ ì •ì˜ëœ ê°’ì„ ì´ìš©í• ìˆ˜ ë„ ìˆë‹¤.

```java
@Target({ElementType.ANNOTATION_TYPE, ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@Documented
@API(
    status = Status.STABLE,
    since = "5.0"
)
@TestTemplate
public @interface RepeatedTest {
    String DISPLAY_NAME_PLACEHOLDER = "{displayName}";
    String CURRENT_REPETITION_PLACEHOLDER = "{currentRepetition}";
    String TOTAL_REPETITIONS_PLACEHOLDER = "{totalRepetitions}";
    String SHORT_DISPLAY_NAME = "repetition {currentRepetition} of {totalRepetitions}";
    String LONG_DISPLAY_NAME = "{displayName} :: repetition {currentRepetition} of {totalRepetitions}";

    int value();

    String name() default "repetition {currentRepetition} of {totalRepetitions}";

    @API(
        status = Status.EXPERIMENTAL,
        since = "5.10"
    )
    int failureThreshold() default Integer.MAX_VALUE;
}
```

ì´ ì†ì„±ì„ ì´ìš©í•˜ëŠ” ë°©ë²•

```java
    @RepeatedTest(
            value = 1,
            name = RepeatedTest.LONG_DISPLAY_NAME
    )
    @DisplayName("Details...")
    void customDisplayNameWithLongPattern(
            TestInfo testInfo
    ) {
        assertEquals(
                "Details... :: repetition 1 of 1",
                testInfo.getDisplayName()
        );
    }
```