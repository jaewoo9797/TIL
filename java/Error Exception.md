# Exception

프로젝트를 진행하며 고민사항이 생겼다. 관련해서 글을 하나 읽었는데, 커스텀 익셉션을 만들어야 한다 vs 기존에 존재하는 익셉션으로도 충분히 할 수 있다. 라는 주제의 글을 읽었다. 두 주장 모두 나는 맞는 것 같다. 결국 내가 어떤 방식을 선택해야하는데 어떤 기준으로 선택할지 충분히 고민해볼 필요가 있는것 같다.

## Custom Exception VS Standard Exception

기존의 내가 Exception을 관리하던 방법은 에러의 원인에 맞게 커스텀 에러 클래스를 만들고 각각 상황에 맞는 에러를 상속받아 사용했다.

![Image](https://github.com/user-attachments/assets/37dee4bf-0e02-4f50-8e25-01757e188cce)

커스텀 에러를 상황에 따라서 매우 많은 Custom Exception 클래스가 만들어진다. 이처럼 도메인별 로직에 따라서 커스텀 에러 클래스 파일이 많아지면 장단점이 존재한다.

### CustomException

**장점**

- 상황에 맞는 네이밍으로 코드를 읽을때 원인을 유추하기 유용하다.
- 전역적으로 에러를 관리하기 편리하다(커스텀 예외를 상속받아 에러를 잡아서 처리하기 때문에)
- 미리 캐싱해서 예외외 객체를 만들어 둘 수 있다.
- 필요한 메시지를 상수로 관리하여 에러 메시지로 사용할 수 있다.
- 예외에 대한 응집도가 올라간다.

**단점**

- 클래스 파일이 많아짐에 따라서 빌드 시간이 길어진다.
- 에러 메시지를 받아서 예외를 던지는 단순한 예외도 클래스 파일을 만들어서 관리한다.
- 모든 예외를 알고 있어야 중복해서 또 만드는 경우를 회피할 수 있다.
- 작성한 사람이 잊어버릴 수도 있고, 유지보수하기 힘들어질 수 있다.

이외에도 각자 생각하는 장단점이 추가로 있을 수 있다. `Custom Exception`의 장단점을 내가 이해할 수 있는 범위 안에서 추려본 것이다.

자바에서 제공하는 `Exception`을 상속받는 표준 예외를 사용하는 것은 어떤 장단점이 있을지 알아보고 두 방법을 비교해보면서 고민했던 부분을 결정해보자. 자바에서는 자주 발생하는 예외에 대해서 미리 만들어두고 우리가 사용할 수 있도록 한다. 이런 의도를 가지고 만들어둔 것들인데 사용하지 않을 이유가 당연히 없다. 만들어 두었기 때문에 우리가 또 예외를 만들 필요가 있을까? 너무나도 합리적인 의문점이고 만들 필요도 없다고 생각된다.

### Standard Exception

**장점**

- 자바에서 제공하였기 때문에 함꼐 일하는 프로그래머들이 모두 알고 있을 확률이 굉장히 높다.
- 모두 알고 있다는 것은 의사소통이 편하고 바로 의도를 알 수 있다는 것이다.
- 따로 예외 클래스를 만들지 않고 고민하지 않고 상황에 맞는 예외를 선택해서 throw 할 수 있다.

**단점**

- 전역적으로 예외를 관리할 때 다르게 처리하고 싶을 경우 곤란한 상황이 발생한다.
- 직렬화할 수 없기에 안전하다.

이외에도 존재할 수 있지만, 내가 알아보고 이해한 범위 내에서는 이런 장단점이 존재하는것 같다. 그럼 두 방식의 장단점을 고려해서 해결방법을 생각해보자.

1. 너무 많아지지 않도록 예외 클래스를 만들어야겠다.
2. 최소한 예외 상황을 분기처리해서 전역적으로 관리할 수 있어야겠다.
3. 의사소통에 용이하도록 만들어야 한다.
4. 중복된 예외 클래스 파일을 만들지 않도록 막을 방법을 생각한다.

이러한 요소를 모두 만족하도록 방법을 생각해야한다. 일단 예외 처리를 위해서는 Custom Exception 을 만드는게 좋아보인다. `Runtime Exception`을 상속받는 클래스를 만든다.
그리고 주로 통신을 위해서 사용하는 `ErrorCode`를 필드에 두고 생성자 파라미터를 통해서 적절한 타입을 받아서 관리한다면 좋을 것 같다. 그리고 최대한 공통된 예외를 생각하고 네이밍하여 클래스를 만든 후 특별한 경우에만 팀원과 소통해서 만들되 최소한으로 하는게 좋을 것 같다.

## 자주 사용되는 Exception을 정리

- `IllegalArgumentException`
  - 호출자가 인수로 부적절한 값을 넘길 때 던지는 예외
- `IllegalStateException`
  - 대상 객체의 상태가 호출된 메서드를 수행하기에 적합하지 않을 때 주로 던진다.
  - 예를 들면, 초기화되지 않은 객체를 사용하려 할 때 던질 수 있다.
- `UnSupportedOperationException`
  - 구현하려는 인터페이스의 메서드 일부를 구현할 수 없는 경우에 사용

[참조해서 코딩](https://goldenrabbit.co.kr/2024/04/03/spring-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B6%80%ED%8A%B8-%EC%98%88%EC%99%B8-%EC%B2%98%EB%A6%AC-%EA%B0%80%EC%9D%B4%EB%93%9C/)
참조

- [custom exception을 언제 서야 할까?](https://tecoble.techcourse.co.kr/post/2020-08-17-custom-exception/)
- [표준 예외를 사용하라](https://jaehun2841.github.io/2019/03/10/effective-java-item72/#%ED%91%9C%EC%A4%80-%EC%98%88%EC%99%B8%EB%A5%BC-%EC%9E%AC%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC)
- [oracle-java-docs, exception 종류](https://docs.oracle.com/javase/8/docs/api/?java/lang/RuntimeException.html)
- [Spring Guide -Exception 전략략](https://cheese10yun.github.io/spring-guide-exception/)
