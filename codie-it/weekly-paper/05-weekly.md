# 5주차 위클리 페이퍼

- 웹 API의 발전 과정에서 SOAP에서 REST로의 전환이 일어난 이유와 그 장단점에 대해 설명하세요
- Spring Boot 에서 `@RestController`로 들어온 HTTP 요청이 처리되어 응답으로 변환되는 전체 과정을 설명하세요. 특히 HTTP 메시지 컨버터가 동작하는 시점과 역할을 포함해서 설명하세요

<br/>

## 1. SOAP , REST

웹 API의 발전과정 중 `SOAP` 란 무엇이고, `REST`란 무엇인지 알아본 후 전환이 일어난 이유와 장단점에 대해서 알아보자.

<br/>

### SOAP

SOAP (Simple Object Access Protocol) 는 다른 언어로 다른 플랫폼에서 빌드된 애플리케이션이 통신할 수 있도록 설계된 최초의 표준 프로토콜입니다.

프로토콜이기 때문에 복잡성과 오버헤드를 증가시키는 빌트인 룰을 적용하므로, 페이지 로드 시간이 길어질 수 있습니다. 그러나 이러한 표준은 빌트인 컴플라이언스를 제공한다는 의미이므로, 기업에서 선호하는 방식이기도 합니다.

빌트인 컴플라이언스 표준에는 보안과 안정적인 데이터베이스 트랜잭션의 기본 속성이 ACID이 포함됩니다.

데이터에 대한 요청이 SOAP API로 전송되는 경우 HTTP, SMTP, TCP 등의 다양한 애플리케이션 레이어 프로토콜을 통해 처리될 수 있습니다. 그러나 요청이 수신되면, 인간과 기계가 모두 읽을 수 있는 마크업 언어인 XML 문서 형식으로 반환 SOAP 메시지가 반환됩니다. SOAP API에 대한 완료된 요청은 브라우저에서 캐시할 수 없으므로, API로 재전송하지 않는 한 이후에 액세스 할 수 없습니다.

<br/>

### REST

REST는 웹 서비스와 모바일 애플리케이션 경량화의 필요에 맞춘 아키텍처 원칙 세트입니다. 가이드라인이기 때문에 이러한 권장 사항의 구현 여부는 개발자에게 달려 있습니다.

데이터 요청이 REST API 로 전송될 때는 일반적으로 하이퍼텍스트 전송 프로토콜(HTTP)을 통해 이루어집니다. 이러한 요청을 수신하면 REST용으로 설계된 API(RESTful API 또는 RESTful 웹 서비스)가 HTML, XML, 일반 텍스트, JSON과 같은 다양한 형식으로 메시지를 반환할 수 있습니다.

<br/>

무엇이 RESTful에 속하는 것인지 갖추어야 할 요소

- 클라이언트, 서버, 리소스로 구성된 클라이언트-서버 아키텍처가 필요합니다.
- 요청이 통과하는 서버에 클라이언트 콘텐츠가 저장되지 않는 스테이트리스(stateless) 클라이언트 - 서버 커뮤니케이션이 필요합니다. 대신 세션의 상태에 대한 정보가 클라이언트에 저장됩니다.
- 일부 클라이언트-서버 간 상호 작용의 필요성을 제거할 캐시 가능 데이터가 필요합니다.
- 애플리케이션 요구 사항별로 다른 형식이 아닌, 표준화된 형식으로 정보를 전송할 수 있도록 구성 요소 간 통합된 인터페이스가 필요합니다.
- 클라이언트-서버 간의 상호 작용을 계층적으로 조정할 수 있도록 계층화된 시스템 제약이 필요합니다.
- 실행 가능한 코드를 전송해 서버가 클라이언트의 기능을 확장할 수 있게 해주는 코드 온디맨드가 필요합니다.

<br/>

## Summary

REST 와 SOAP는 각기 다른 두 가지의 온라인 데이터 전송 방식입니다.

둘 다 웹 애플리케이션 간 데이터 통신을 허용하는 애플리케이션 프로그래밍 인터페이스(API)를 구축하는 방법을 정의합니다. REST는 아키텍처 원칙 세트이고, SOAP는 W3C에서 유지관리하는 공식 프로토콜입니다.

그래서 두 차이점은 무엇인가?  
REST는 유연한 구현을 제공하는 가이드라인 세트고, SOAP는 XML 메시징과 같은 특정 요건이 있는 프로토콜입니다.

REST API는 경량화되어 있기 때문에 사물 인터넷, 모바일 애플리케이션 개발, 서버리스 컴퓨팅과 같이 보다 새로운 컨텍스트에 이상적입니다.

SOAP 웹 서비스는 많은 기업에서 필요로 하는 기본 보안과 트랜잭션 컴플라이언스를 제공하지만, 이로 인해 좀 더 무거운 경향이 있습니다.

<br/>

## 2. 유사점 SOAP, REST

애플리케이션을 빌드하려면 다양한 프로그래밍 언어, 아키텍처 및 플랫폼을 사용할 수 있습니다. 데이터 형식이 서로 다르기 때문에 이러한 다양한 기술간에 데이터를 공유하는 것은 어렵습니다. SOAP 와 REST는 모두 이 문제를 해결하기 위해 개발되었습니다.

<br/>

- 둘 다 애플리케이션 간 데이터를 요청을 작성, 처리 및 응답하는 방식에 대한 규칙과 표준을 설정함.
- 둘 다 표준화된 인터넷 프로토콜인 HTTP를 사용하여 정보를 교환함.
- 둘다 안전하고 암호화된 통신을 위해 SSL/TLS를 지원함.

<br/>

## 3. 언제 구분해서 사용하는가.

SOAP, REST 중 하나를 선택하기 전 시나리오와 API 사용자의 요구사항을 고려한다.

<br/>

### 전체 애플리케이션 설계

모바일 앱 및 하이브리드 애플리케이션과 같은 최신 애플리케이션은 REST API에서 더 잘 작동합니다. REST는 마이크로서비스 및 컨테이너와 같은 최신 아키텍처 패턴을 사용하여 애플리케이션을 설계할 수 있는 확장성과 유연성을 제공합니다. 그러나 이미 SOAP API가 있는 레거시 시스템을 통합하거나 확장해야 하는 경우 SOAP를 계속 사용하는 것이 더 나을 수 있다.

<br/>

### 보안

퍼블릭 API는 보안 요구 사항이 낮고 누구나 사용할 수 있도록 하는 높은 유연성을 요구합니다. 따라서 PUBLIC API를 빌드할 때는 REST가 더 나은 선택입니다. 반대로 기업 내부 요구사항을 위한 일부 PRIVATE API는 SOAP의 WS-Security를 통해 더 엄격한 보안 조치를 취하는 것이 도움이 될 수 있습니다.

<br/>

## 4. SOAP API와 REST API 작동 방식

SOAP는 시스템 간 엄격한 통신 계약이 필요한 오래된 기술입니다. 시간이 지남에 따라 기술 변화를 수용하기 위해 새로운 웹 서비스 표준이 추가되엇지만 이로 인해 추가 오버헤드가 발생합니다. REST는 SOAP 이후에 개발되었으며 본질적으로 많은 단점을 해결합니다.

<br/>

### SOAP API

SOAP는 엄격한 통신 규칙을 정의하는 프로토콜입니다.  
**표준**

- 웹 서비스 보안 WS-Security 은 고유 식별자로 토큰을 사용하는 것과 같은 보안 조치를 지정함
- 웹 서비스 주소 지정 WS-Addressing 에는 라우팅 정보를 메타데이터로 포함해야 함
- WS-ReliableMessaging 은 SOAP 메시징의 오류 처리를 표준화함
- 웹 서비스 기술 언어 WSDL는 SOAP 웹 서비스의 범위와 기능을 설명함

SOAP API로 요청을 보낼 때는 HTTP 요청을 SOAP 봉투에 포장해야합니다. 항상 SOAP 응답으로 XML 문서를 반환합니다.

<br/>

### REST API

REST API 작동 방식에는 6가지 조건을 부과하는 소프트웨어 아키텍처 스타일입니다.

1. 클라이언트-서버 아키텍처 발신자와 수신자는 기술, 플랫폼, 프로그래밍 언어 등과 관련하여 서로 독립적입니다.
2. 계층화. 서버에는 클라이언트 요청을 완료하기 위해 함께 작업하는 여러 중개자가 있을 수 있지만 클라이언트에게는 보이지 않습니다.
3. 균일한 인터페이스. API는 전체적으로 완전히 사용할 수 있는 표준 형식으로 데이터를 반환합니다.
4. 무상태. API는 이전 요청과 독립적으로 모든 새 요청을 완료합니다.
5. 캐싱 가능. 모든 API 응답은 캐싱할 수 있습니다.
6. 온디맨트 코드. 필요한 경우 API 응답에 코드 스니펫이 포함될 수 있습니다.

GET및 POST 와 같은 HTTP 동사를 사용하여 REST 요청을 보냅니다. REST API응답은 일반적으로 JSON 이지만 데이터 형식이 다를 수 있습니다.

<br/>

## 5. 주요 차이점

SOAP 는 프로토콜이고 REST는 아키텍처 스타일입니다.

<br/>

### 설계

SOAP API는 함수 또는 작업을 노출하는 반면 REST API는 데이터 기반입니다.

다른 애플리케이션에서 조작할 수 있는 직원 데이터가 포함된 애플리케이션을 예로 들어보겠습니다. 애플리케이션의 SOAP API는 CreateEmployee라는 함수를 노출할 수 있습니다. 직원을 만들려면 요청을 보낼 때 SOAP 메시지에 함수 이름을 지정해야 합니다.

그러나 REST API는 /employees 라는 URL을 노출할 수 있으며 해당 URL에 대한 POST 요청은 새 직원 레코드를 생성합니다.

<br/>

### 유연성

SOAP는 엄격하며 애플리케이션 간 XML 메시징만 허용합니다. 또한 애플리케이션 서버는 각 클라이언트의 상태를 유지해야 합니다. 즉, 새요청을 처리할 때 이전 요청을 모두 기억해야 합니다.

REST는 더 유연하며 애플리케이션에서 일반 텍스트, HTML, XML 등 JSON으로 데이터를 전송할 수 있습니다. 또한 REST 는 무상태이므로 모든 이전 요청과 독립적으로 처리합니다.

<br/>

### 성능

SOAP 메시지는 더 크고 복잡하기 때문에 전송 및 처리 속도가 느려집니다. 이로 인해 페이지 로드 시간이 늘어날 수 있습니다.

REST 는 메시지 크기가 작기 때문에 SOAP보다 빠르고 효율적입니다. REST 응답도 캐싱할 수 있으므로 서버는 자주 액세스하는 데이터를 캐시에 저장하여 페이지 로드 시간을 더욱 단축할 수 있습니다.

<br/>

### 확장성

SOAP 프로토콜을 사용하려면 애플리케이션이 요청 간에 상태를 저장해야 하므로 대역폭과 메모리 요구 사항이 증가합니다. 결과적으로 애플리케이션 비용이 많이 들고 확장하기가 어려워집니다.

SOAP와 달리 REST는 무상태 및 계층화된 아키텍처를 허용하므로 확장성이 뛰어납니다. 예를 들어 애플리케이션 서버는 요청을 다른 서버로 전달하거나 콘텐츠 전송 네트워크와 같은 중개자가 요청을 처리하도록 허용할 수 있습니다.

<br/>

### 보안

SOAP를 HTTPS와 함께 사용하려면 추가 WS-Security 계층이 필요합니다. 추가 헤더 콘텐츠를 사용하여 지정된 서버의 프로세스만 SOAP 메시지 컨텐츠를 읽도록 합니다. 이로 인해 통신 오버헤드가 추가되고 성능에 부정적인 영향을 미칩니다.

REST는 추가 오버헤드 없이 HTTPS를 지우너합니다.

<br/>

### 신뢰성

SOAP에는 오류 처리 로직이 내장되어 있으며 더 높은 신뢰성을 제공합니다. 반면 REST는 통신 장애 발생 시 다시 시도해야 하며 안정성이 떨어집니다.

<br/>

출처

- [AWS - SOAP, REST](https://aws.amazon.com/ko/compare/the-difference-between-soap-rest/)
- [text](https://www.redhat.com/ko/topics/integration/whats-the-difference-between-soap-rest)

---

# Spring Boot 에서 `@RestController`로 들어온 HTTP 요청이 처리되어 응답으로 변환되는 전체 과정을 설명하세요. 특히 HTTP 메시지 컨버터가 동작하는 시점과 역할을 포함해서 설명하세요
